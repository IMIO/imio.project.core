<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:omit-tag="">

<table class='listing nosort' tal:define="results view/prepareBudgetInfosForDisplay;"
                              tal:condition="results">
  <tal:defines define="years python: results[0];
                       budget_types python: results[1];
                       res python: results[2];
                       total_by_year python: results[3];
                       total_by_budget_type python: results[4];">
      <thead>
      <tr>
        <th></th>
        <th>Global</th>
        <tal:loop_years repeat='year years'>
          <th tal:content='year'></th>
        </tal:loop_years>
      </tr>
      </thead>
      <tbody>
        <tr tal:repeat="budget_type budget_types">
          <td tal:content='budget_type'>
          </td>
          <td tal:content="python: total_by_budget_type[budget_type]">
          </td>
          <tal:loop_by_year repeat="year years">
            <td tal:content="python: res[year][budget_type]">
            </td>
          </tal:loop_by_year>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td tal:repeat="year years" tal:content="python: year in total_by_year and total_by_year[year] or '-'"></td>
        </tr>
      </tfoot>
  </tal:defines>
</table>

</html>
